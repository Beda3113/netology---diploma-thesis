<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Изменение статуса заказа</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; }
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .status-new { background-color: #d4edda; color: #155724; }
        .status-processing { background-color: #fff3cd; color: #856404; }
        .status-shipped { background-color: #cce5ff; color: #004085; }
        .status-delivered { background-color: #28a745; color: white; }
        .status-cancelled { background-color: #dc3545; color: white; }
    </style>
</head>
<body>
    <div style="max-width: 600px; margin: 0 auto;">
        <h2>Статус вашего заказа изменён</h2>
        
        <p>Здравствуйте, {{ order.user.first_name }}!</p>
        
        <p>Статус заказа <strong>№{{ order.id }}</strong> 
        (от {{ order.created_at|date:"d.m.Y" }}) изменён на:
        <span class="status-badge status-{{ new_status|slugify }}">
            {{ new_status_display }}
        </span></p>
        
        {% if new_status == 'shipped' %}
        <div style="background-color: #f8f9fa; padding: 15px; margin: 15px 0;">
            <h3>Информация о доставке</h3>
            <p>Трек-номер: {{ order.tracking_number|default:"будет указан позже" }}</p>
            <p>Ожидаемая дата доставки: {{ order.estimated_delivery|date:"d.m.Y"|default:"уточняется" }}</p>
        </div>
        {% endif %}
        
        <p>Вы можете проверить текущий статус в <a href="{{ order_detail_url }}">личном кабинете</a>.</p>
        
        <div style="margin-top: 30px; font-size: 0.9em; color: #777;">
            <p>Если у вас есть вопросы, ответьте на это письмо.</p>
            <p>С уважением,<br>Служба поддержки {{ shop_name }}</p>
        </div>
    </div>
</body>
</html>
